systemFiles = '{"type": "directory", "content": {"home": {"type": "directory", "content": {"documents": {"type": "directory", "content": {}}, "downloads": {"type": "directory", "content": {}}, "programdata": {"type": "directory", "content": {}}}}, "soysoup": {"type": "directory", "content": {"bar.soup": {"type": "file", "content": "class ProgramSource extends Program {\\n  showProgressBar(percent) {\\n    this.outputShell.text =\\n      \\"[\\" + \\"#\\".repeat(percent) + \\"-\\".repeat(100 - percent) + \\"]\\";\\n    this.outputShell.flush();\\n  }\\n  load(args) {\\n    var self = this;\\n    for (let percent = 0; percent <= 101; percent++) {\\n      setTimeout(function () {\\n        if (percent == 101) {\\n          self.outputShell.println(\\"finished the important task!\\");\\n          self.quit();\\n          return;\\n        }\\n        self.showProgressBar(percent, self.outputShell);\\n      }, 40 * percent);\\n    }\\n  }\\n}\\n"}, "cat.soup": {"type": "file", "content": "class ProgramSource extends Program {\\n  load(args) {\\n    if (fileSystem.pathExists(args) == false || !fileSystem.isFile(args)) {\\n      this.outputShell.println(\\"error: path doesn\'t exist or is not a file\\");\\n      this.quit();\\n      return;\\n    }\\n    this.outputShell.println(fileSystem.readFile(args));\\n    this.quit();\\n  }\\n}\\n"}, "cls.soup": {"type": "file", "content": "class ProgramSource extends Program {\\n  load(args) {\\n    this.outputShell.text = \\"\\";\\n    this.outputShell.flush();\\n    this.quit();\\n  }\\n}\\n"}, "cool.soup": {"type": "file", "content": "class ProgramSource extends Program {\\n  onKeypress(event) {\\n    if (event.key == \\"a\\") {\\n      this.x -= 1;\\n    }\\n    if (event.key == \\"d\\") {\\n      this.x += 1;\\n    }\\n    if (event.key == \\"w\\") {\\n      this.y -= 1;\\n    }\\n    if (event.key == \\"s\\") {\\n      this.y += 1;\\n    }\\n    this.x = this.x.clamp(0, 49);\\n    this.y = this.y.clamp(0, 6);\\n    this.draw();\\n  }\\n  load(args) {\\n    this.x = 25;\\n    this.y = 3;\\n    this.draw();\\n  }\\n  draw() {\\n    var grid = (\\"-\\".repeat(50) + \\"\\\\n\\").repeat(7);\\n    var indexPosition = this.y * 51 + this.x;\\n    grid = grid.slice(0, indexPosition) + \\"#\\" + grid.slice(indexPosition + 1);\\n    this.outputShell.text = grid + \\"\\\\n\\\\n[use WASD to move]\\";\\n    this.outputShell.flush();\\n  }\\n}\\n"}, "echo.soup": {"type": "file", "content": "class ProgramSource extends Program {\\n  load(args) {\\n    this.outputShell.println(args);\\n    this.quit();\\n  }\\n}\\n"}, "help.soup": {"type": "file", "content": "class ProgramSource extends Program {\\n  load(args) {\\n    var helpMessage = `cat - read contents of file\\necho - print a string to shell\\nexit - close terminal instance\\nhelp - prints this\\nls - list contents of directory\\nproc - list or terminate processes\\nreload - reset file system\\ncls - clears the terminal\\nterminal - open new instance of terminal`;\\n    this.outputShell.println(helpMessage);\\n    this.quit();\\n  }\\n}\\n"}, "ls.soup": {"type": "file", "content": "class ProgramSource extends Program {\\n  load(args) {\\n    if (\\n      fileSystem.pathExists(args) == false ||\\n      fileSystem.isFile(args) == true\\n    ) {\\n      this.outputShell.println(\\n        \\"error: path doesn\'t exist or is not a directory\\"\\n      );\\n      this.quit();\\n      return;\\n    }\\n    this.outputShell.println(fileSystem.readDirectory(args).join(\\"\\\\n\\"));\\n    this.quit();\\n  }\\n}\\n"}, "proc.soup": {"type": "file", "content": "class ProgramSource extends Program {\\n  load(args) {\\n    var parts = parseToParts(args);\\n    if (\\n      !args ||\\n      (parts[0] != \\"list\\" && parts[0] != \\"kill\\") ||\\n      (parts[0] == \\"kill\\" && parts.length == 1)\\n    ) {\\n      this.outputShell.println(\\n        `error: missing or incorrect args. use \'proc list\' to list processes or \'proc kill <process ID>\' to terminate a process.`\\n      );\\n      // invalid args if args is empty, if the first argument is not list or kill, or if the first argument is kill but there is no argument for process ID\\n      this.quit();\\n      return;\\n    }\\n    if (parts[0] == \\"list\\") {\\n      var text = \\"running processes:\\";\\n      for (let index = 0; index < programs.length; index++) {\\n        const program = programs[index];\\n        text +=\\n          \\"\\\\n\\\\t\\" +\\n          index +\\n          \\" - \\" +\\n          program.filepath.split(\\"/\\")[program.filepath.split(\\"/\\").length - 1];\\n      }\\n      this.outputShell.println(text);\\n    } else if (parts[0] == \\"kill\\") {\\n      programs.splice(Number(parts[1]), 1);\\n      this.outputShell.println(\\"killed process with ID \\" + parts[1]);\\n    }\\n    this.quit();\\n  }\\n}\\n"}, "reload.soup": {"type": "file", "content": "class ProgramSource extends Program {\\n  load(args) {\\n    fileSystem.loadFromString(systemFiles);\\n    this.quit();\\n  }\\n}\\n"}, "terminal.soup": {"type": "file", "content": "class ProgramSource extends Program {\\n  removeCharacter(str, index) {\\n    index -= 1;\\n    if (index < 0 || index >= str.length) {\\n      return str;\\n    }\\n    return str.slice(0, index) + str.slice(index + 1);\\n  }\\n\\n  onKeypress(event) {\\n    console.log(event.key.length);\\n    if (event.key.length == 1) {\\n      this.currentLineInput = insert(\\n        this.currentLineInput,\\n        event.key,\\n        this.selectionIndex\\n      );\\n      this.selectionIndex += 1;\\n    } else if (event.key == \\"Enter\\") {\\n      if (event.shiftKey) {\\n        this.currentLineInput = insert(\\n          this.currentLineInput,\\n          \\"\\\\n\\",\\n          this.selectionIndex\\n        );\\n        this.selectionIndex += 1;\\n      } else {\\n        this.shell.println(\\">\\" + this.currentLineInput);\\n        if (this.currentLineInput == \\"exit\\") {\\n          this.quit();\\n          this.currentLineInput = \\"\\";\\n          this.currentInputTotal = \\"\\";\\n          this.selectionIndex = 0;\\n          this.flush();\\n          return;\\n        }\\n        executeCommand(this.currentLineInput, this.shell);\\n\\n        this.currentLineInput = \\"\\";\\n        this.currentInputTotal = \\"\\";\\n        this.selectionIndex = 0;\\n      }\\n    } else if (event.key == \\"ArrowLeft\\") {\\n      this.selectionIndex = Math.max(0, this.selectionIndex - 1);\\n    } else if (event.key == \\"ArrowRight\\") {\\n      this.selectionIndex = Math.min(\\n        this.currentLineInput.length,\\n        this.selectionIndex + 1\\n      );\\n    } else if (event.key == \\"Backspace\\") {\\n      if (this.currentLineInput) {\\n        this.currentLineInput = this.removeCharacter(\\n          this.currentLineInput,\\n          this.selectionIndex\\n        );\\n        this.selectionIndex -= 1;\\n      }\\n    }\\n    console.log(event.key);\\n    console.log(this.selectionIndex);\\n\\n    this.flush();\\n  }\\n  load(args) {\\n    var self = this;\\n    this.shell = new Shell(function (text) {\\n      console.log(text);\\n      //self.text = text;\\n      self.flush();\\n    });\\n\\n    this.currentLineInput = \\"\\";\\n    this.currentInputTotal = \\"\\";\\n    this.selectionIndex = 0;\\n\\n    this.shell.text =\\n      \\"booted soysoupOS v\\" + systemVersion + \\"\\\\ntype \'help\' for help\\";\\n    this.commandHistory = [];\\n    this.historyIndex = -1;\\n\\n    this.flush();\\n  }\\n  flush() {\\n    if (programs[0] == this) {\\n      this.outputShell.text =\\n        this.shell.text +\\n        \\"\\\\n>\\" +\\n        insert(this.currentLineInput, \\"|\\", this.selectionIndex);\\n    } else {\\n      this.outputShell.text = this.shell.text;\\n    }\\n    this.outputShell.flush();\\n  }\\n}\\n"}}}}}'